(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{107:function(e,t,s){e.exports={loginContainer:"Login_loginContainer__14htP"}},11:function(e,t,s){e.exports={profileCont:"Profile_profileCont__1XpQf",profileInformation:"Profile_profileInformation__NgMD4",profileImage:"Profile_profileImage__2MyN7",person:"Profile_person__EqmtB",personDescription:"Profile_personDescription__1KBzj",posts:"Profile_posts__1EH8w",newPost:"Profile_newPost__2-zcE",usersPosts:"Profile_usersPosts__2eFIr",postItem:"Profile_postItem__1HkXD",status:"Profile_status__qo_NJ"}},116:function(e,t,s){},18:function(e,t,s){e.exports={userBlock:"User_userBlock__iHGZn",userAvatar:"User_userAvatar__1mUJh",wrapper:"User_wrapper__1xyD2",container:"User_container__QsORz",name:"User_name__1WxGk",message:"User_message__2kgIm",time:"User_time__3u5g-",status:"User_status__2E5gi",country:"User_country__3cx8I",city:"User_city__3f8B_",location:"User_location__GFz2A",usersBlock:"User_usersBlock__-p0BH",userButton:"User_userButton__10JWE",pages:"User_pages__3dHIx",selected:"User_selected__2smQ7"}},20:function(e,t,s){e.exports={navbar:"Navbar_navbar__Tbgap",navbarItem:"Navbar_navbarItem__1KNZm",active:"Navbar_active__3Rtia"}},22:function(e,t,s){e.exports={dialogsContainer:"Dialogs_dialogsContainer__g5GY1",dialogItem:"Dialogs_dialogItem__3pe_B",addMessage:"Dialogs_addMessage__p1aZo",dialog:"Dialogs_dialog__1wG-_",dialogUsers:"Dialogs_dialogUsers__3nt6_",user:"Dialogs_user__3pi0y",dialogMessage:"Dialogs_dialogMessage__2bZ3C",active:"Dialogs_active__12afm"}},239:function(e,t,s){},240:function(e,t,s){"use strict";s.r(t);var a=s(53),n=s.n(a),r=s(1),i=s.n(r),o=(s(116),s(20)),c=s.n(o),u=s(12),l=s(0);var d=function(){return Object(l.jsxs)("div",{className:c.a.navbar,children:[Object(l.jsx)("div",{className:c.a.navbarItem,children:Object(l.jsx)(u.b,{activeClassName:c.a.active,to:"/profile",children:"Profile"})}),Object(l.jsx)("div",{className:c.a.navbarItem,children:Object(l.jsx)(u.b,{activeClassName:c.a.active,to:"/dialogs",children:"Dialogs"})}),Object(l.jsx)("div",{className:c.a.navbarItem,children:Object(l.jsx)(u.b,{activeClassName:c.a.active,to:"/users",children:"Users"})}),Object(l.jsx)("div",{className:c.a.navbarItem,children:Object(l.jsx)(u.b,{activeClassName:c.a.active,to:"/music",children:"Music"})}),Object(l.jsx)("div",{className:c.a.navbarItem,children:Object(l.jsx)(u.b,{activeClassName:c.a.active,to:"/settings",children:"Settings"})})]})},j=s(26),p=s(27),b=s(30),h=s(29),g=s(11),f=s.n(g),m=function(e){Object(b.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(j.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={editMode:!1,status:e.props.status},e.onStatusChange=function(t){t&&e.setState({status:t.currentTarget.value})},e.activateEditMode=function(){e.setState({editMode:!0})},e.deActivateEditMode=function(){e.setState({editMode:!1}),e.props.updateStatus(e.state.status)},e}return Object(p.a)(s,[{key:"componentDidUpdate",value:function(e,t){e.status!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){return console.log(this.state.status),Object(l.jsx)("div",{children:Object(l.jsx)("div",{onBlur:this.deActivateEditMode,onDoubleClick:this.activateEditMode,children:this.state.editMode?Object(l.jsx)("input",{onChange:this.onStatusChange,className:f.a.status,autoFocus:!0,value:this.state.status}):Object(l.jsx)("span",{children:this.props.status})})})}}]),s}(i.a.Component),O=function(e){return Object(l.jsxs)("div",{className:f.a.profileInformation,children:[Object(l.jsx)("img",{src:e.photo,className:f.a.profileImage}),Object(l.jsxs)("div",{className:f.a.person,children:[Object(l.jsxs)("h2",{className:f.a.fullName,children:[" ",e.fullName]}),Object(l.jsx)("h4",{className:f.a.personDescription,children:e.lookingForAJobDescription}),Object(l.jsx)("h4",{className:f.a.personDescription,children:e.contacts.vk}),Object(l.jsx)(m,{updateStatus:e.updateStatus,status:e.status})]})]})},_=function(){return Object(l.jsx)("div",{className:f.a.posts,children:Object(l.jsx)("div",{className:"myPost",children:Object(l.jsx)("h3",{children:"Hey"})})})},x=function(e){var t=function(){e.createPost()};return Object(l.jsxs)("div",{className:f.a.newPost,children:[Object(l.jsx)("input",{onKeyPress:function(e){"Enter"===e.key&&t()},value:e.newPostText,onChange:function(t){var s=t.currentTarget.value;s&&e.updateNewPostText(s)}}),Object(l.jsx)("button",{onClick:t,children:"Send"})]})},v=s(18),P=s.n(v),N=function(e){return Object(l.jsxs)("div",{className:P.a.userBlock,children:[Object(l.jsx)("div",{className:P.a.userAvatar,children:e.photoUrl?Object(l.jsx)("img",{alt:"avatar",src:e.photoUrl}):Object(l.jsx)("img",{alt:"avatar",src:"https://insights.mgm-tp.com/wp-content/uploads/2019/04/default-avatar.png"})}),Object(l.jsx)("div",{className:P.a.userName,children:e.name}),Object(l.jsx)("p",{className:P.a.status,children:e.status})]})},w=function(e){return Object(l.jsxs)("div",{className:f.a.postItem,children:[Object(l.jsx)(N,{id:e.id,photoUrl:"https://insights.mgm-tp.com/wp-content/uploads/2019/04/default-avatar.png",name:e.username}),e.message]})},S=s(10),y=s(32),k=s(4),T=s(106),U=s.n(T).a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"4e9f6c7c-553d-4c3d-8aa0-0bbb01a71677"}}),C=function(e,t){return U.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},A=function(e){return U.post("follow/".concat(e))},E=function(e){return U.delete("follow/".concat(e))},I=function(e){return U.get("profile/".concat(e))},D=function(e){return U.get("profile/status/".concat(e))},M=function(e){return U.put("profile/status",{status:e})},F=function(){return U.get("auth/me")},H="ADD_POST",L="CHANGE_NEW_POST_TEXT",B="SET_USER_PROFILE",G="SET_USER_STATUS",R="UPDATE_USER_STATUS",z={post:[{id:1,username:"Liza",message:"Hey! How are you?"},{id:2,username:"Denchik",message:"Hey! How are you?"},{id:3,username:"Leo",message:"Hey! How are you?"}],userProfile:{aboutMe:"",contacts:{github:"",facebook:"",website:"",vk:"",twitter:"",instagram:""},fullName:"",lookingForAJob:!0,lookingForAJobDescription:"",photos:{small:"",large:""},userId:null,status:""},newPostText:""},J=function(e){return{type:G,status:e}},W=function(){return Object(l.jsxs)("div",{children:[Object(l.jsx)(K,{}),Object(l.jsx)(X,{})]})},K=Object(S.b)((function(e){return{newPostText:e.profilePage.newPostText}}),(function(e){return{createPost:function(){e({type:H})},updateNewPostText:function(t){e(function(e){return{type:L,text:e}}(t))}}}))(x),X=Object(S.b)((function(e){return{post:e.profilePage.post}}))((function(e){return Object(l.jsx)("div",{className:f.a.usersPosts,children:e.post.map((function(e){return Object(l.jsx)(w,{username:e.username,id:e.id,message:e.message},e.id)}))})})),Q=s(9),Z=s(8),q=function(e){Object(b.a)(s,e);var t=Object(h.a)(s);function s(){return Object(j.a)(this,s),t.apply(this,arguments)}return Object(p.a)(s,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;e||(e="2"),this.props.SetUserProfileThunk(+e),this.props.SetUserStatusThunk(+e)}},{key:"render",value:function(){return Object(l.jsxs)("div",{className:f.a.profileCont,children:[Object(l.jsx)(O,{updateStatus:this.props.UpdateUserStatusThunk,status:this.props.status,fullName:this.props.fullName,lookingForAJobDescription:this.props.lookingForAJobDescription,contacts:this.props.contacts,photo:this.props.userProfile.photos.small?this.props.userProfile.photos.small:"https://insights.mgm-tp.com/wp-content/uploads/2019/04/default-avatar.png"}),Object(l.jsx)(_,{}),Object(l.jsx)(W,{})]})}}]),s}(i.a.Component),Y=Object(Z.d)(Object(S.b)((function(e){return{isAuth:e.auth.isAuth,userProfile:e.profilePage.userProfile,contacts:e.profilePage.userProfile.contacts,fullName:e.profilePage.userProfile.fullName,lookingForAJobDescription:e.profilePage.userProfile.lookingForAJobDescription,status:e.profilePage.userProfile.status}}),{SetUserProfileThunk:function(e){return function(t){I(e).then((function(e){var s;t((s=e.data,{type:B,profileData:s}))})),D(e).then((function(e){t(J(e.data))}))}},SetUserStatusThunk:function(e){return function(t){D(e).then((function(e){t(J(e.data))}))}},UpdateUserStatusThunk:function(e){return function(t){M(e).then((function(s){0===s.data.resultCode&&t(J(e))}))}}}),Q.f)(q),V=s(22),$=s.n(V),ee=function(e){return Object(l.jsx)("div",{className:$.a.message,children:e.message})},te={dialogs:[{id:1,username:"Liza"},{id:2,username:"Denchik"},{id:3,username:"Leo"},{id:4,username:"Brodiyagi"}],messages:[{id:1,message:"Hey"},{id:2,message:"Hey"},{id:3,message:"Hey"},{id:4,message:"Hey"}],newMessageText:""},se=s(110),ae=function(e){return{isAuth:e.auth.isAuth}};function ne(e){return Object(S.b)(ae)((function(t){var s=t.isAuth,a=Object(se.a)(t,["isAuth"]);return s?Object(l.jsx)(e,Object(k.a)({},a)):Object(l.jsx)(Q.a,{to:"/login"})}))}var re=function(e){return Object(l.jsx)("div",{className:$.a.dialog,children:Object(l.jsx)(u.b,{to:"/dialogs/"+e.id,activeClassName:$.a.active,className:$.a.user,children:Object(l.jsx)(N,{id:e.id,photoUrl:"https://insights.mgm-tp.com/wp-content/uploads/2019/04/default-avatar.png",name:e.username})})})},ie=Object(Z.d)(Object(S.b)((function(e){return{dialogsPage:e.dialogsPage,isAuth:e.auth.isAuth}}),(function(e){return{updateNewMessageBody:function(t){e(function(e){return{type:"CHANGE-MESSAGE-TEXT",newMessage:e}}(t))},sendMessage:function(){e({type:"SEND-MESSAGE"})}}})),ne)((function(e){var t=e.dialogsPage.newMessageText,s=function(){e.sendMessage()},a=null;return a=t?null:"disable",Object(l.jsxs)("div",{className:$.a.dialogsContainer,children:[Object(l.jsxs)("div",{className:$.a.dialogItem,children:[Object(l.jsx)("div",{className:$.a.dialogUsers,children:e.dialogsPage.dialogs.map((function(e){return Object(l.jsx)(re,{id:e.id,username:e.username},e.id)}))}),Object(l.jsx)("div",{className:$.a.dialogMessage,children:e.dialogsPage.messages.map((function(e){return Object(l.jsx)(ee,{message:e.message},e.id)}))})]}),Object(l.jsxs)("div",{className:$.a.addMessage,children:[Object(l.jsx)("textarea",{onKeyPress:function(e){"Enter"===e.key&&s()},value:t,onChange:function(t){var s=t.currentTarget.value;s&&e.updateNewMessageBody(s)}}),Object(l.jsx)("button",{disabled:!!a,onClick:s,children:"Send"})]})]})})),oe=function(){return Object(l.jsx)("div",{})},ce=function(){return Object(l.jsx)("div",{})},ue=s.p+"static/media/Preloader.cef7eb40.gif",le=function(){return Object(l.jsx)("img",{alt:"icon",src:ue})},de=function(e){Object(b.a)(s,e);var t=Object(h.a)(s);function s(){return Object(j.a)(this,s),t.apply(this,arguments)}return Object(p.a)(s,[{key:"componentDidMount",value:function(){this.props.getUsersThunk(this.props.currentPage,this.props.pageSize)}},{key:"onPageChanged",value:function(e){this.props.getUsersThunk(e,this.props.pageSize)}},{key:"render",value:function(){for(var e=this,t=Math.ceil(this.props.totalCount/this.props.pageSize),s=[],a=1;a<=t;a++)s.push(a);return Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{children:s.map((function(t){return Object(l.jsx)("span",{onClick:function(){e.onPageChanged(t)},className:e.props.currentPage===t?P.a.selected:P.a.pages,children:t})}))}),this.props.isFetching&&Object(l.jsx)(le,{}),this.props.items.map((function(t){return Object(l.jsx)("div",{className:P.a.wrapper,children:Object(l.jsx)("div",{className:P.a.container,children:Object(l.jsxs)("div",{className:P.a.usersBlock,children:[Object(l.jsx)(u.b,{to:"/profile/".concat(t.id),children:Object(l.jsx)(N,{name:t.name,photoUrl:t.photos.large,status:t.status,id:t.id},t.id)}),Object(l.jsx)("div",{children:t.followed?Object(l.jsx)("button",{disabled:e.props.followInProgress.some((function(e){return e===t.id})),onClick:function(){return e.props.UnFollowThunk(t.id)},className:P.a.userButton,children:"UNFOLLOW"}):Object(l.jsx)("button",{disabled:e.props.followInProgress.some((function(e){return e===t.id})),onClick:function(){return e.props.FollowThunk(t.id)},className:P.a.userButton,children:"FOLLOW"})})]})})},t.id)}))]})}}]),s}(i.a.Component),je="FOLLOW",pe="UNFOLLOW",be="SET_USERS",he="SET_CURRENT_PAGE",ge="SET_TOTAL_USERS_COUNT",fe="TOGGLE_IS_FETCHING",me="FOLLOW_IN_PROGRESS",Oe={items:[],totalCount:0,error:null,pageSize:10,currentPage:1,isFetching:!1,followInProgress:[]},_e=function(e){return{type:he,currentPage:e}},xe=function(e){return{type:fe,isFetching:e}},ve=function(e,t){return{type:me,isFollow:e,id:t}},Pe=Object(Z.d)(Object(S.b)((function(e){return{isAuth:e.auth.isAuth,items:e.usersPage.items,pageSize:e.usersPage.pageSize,totalCount:e.usersPage.totalCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followInProgress:e.usersPage.followInProgress}}),{FollowThunk:function(e){return function(t){t(ve(!0,e)),A(e).then((function(s){0===s.data.resultCode&&t({type:je,userID:e}),t(ve(!1,e))}))}},UnFollowThunk:function(e){return function(t){t(ve(!0,e)),E(e).then((function(s){0===s.data.resultCode&&t({type:pe,userID:e}),t(ve(!1,e))}))}},SetCurrentPage:_e,getUsersThunk:function(e,t){return function(s){s(xe(!0)),C(e,t).then((function(t){var a;s(xe(!1)),s((a=t.items,{type:be,items:a})),s({type:ge,totalCount:500}),s(_e(e))}))}}}),ne)(de),Ne=s(55),we=s.n(Ne);var Se=function(e){return Object(l.jsxs)("header",{className:we.a.header,children:[Object(l.jsx)("h2",{className:we.a.title,children:"Social Network"}),Object(l.jsx)("div",{className:we.a.loginBlock,children:e.isAuth?e.login:Object(l.jsx)(u.b,{to:"/login",children:"Login"})})]})},ye="SET_AUTH_DATA",ke={userId:null,email:null,login:null,isAuth:!1},Te=function(e){Object(b.a)(s,e);var t=Object(h.a)(s);function s(){return Object(j.a)(this,s),t.apply(this,arguments)}return Object(p.a)(s,[{key:"componentDidMount",value:function(){this.props.SetAuthDataThunk()}},{key:"render",value:function(){return Object(l.jsx)(Se,{login:this.props.data.login,isAuth:this.props.isAuth})}}]),s}(i.a.Component),Ue=Object(S.b)((function(e){return{data:e.auth,isAuth:e.auth.isAuth}}),{SetAuthDataThunk:function(){return function(e){F().then((function(t){var s,a,n;0===t.data.resultCode&&e((s=t.data.data.id,a=t.data.data.email,n=t.data.data.login,{type:ye,data:{userId:s,email:a,login:n}}))}))}}})(Te),Ce=s(107),Ae=s.n(Ce),Ee=s(242),Ie=s(241),De=Object(Ie.a)({form:"login"})((function(e){return Object(l.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(l.jsx)("div",{children:Object(l.jsx)(Ee.a,{name:"login",placeholder:"Login",component:"input"})}),Object(l.jsx)("div",{children:Object(l.jsx)(Ee.a,{name:"password",placeholder:"Password",component:"input",type:"password"})}),Object(l.jsxs)("div",{children:[Object(l.jsx)(Ee.a,{name:"rememberMe",component:"input",type:"checkbox"})," remember me"]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{children:"Login"})})]})})),Me=function(){return Object(l.jsxs)("div",{className:Ae.a.loginContainer,children:[Object(l.jsx)("h1",{children:"Login"}),Object(l.jsx)(De,{onSubmit:function(e){console.log(e)}})]})};var Fe=function(){return Object(l.jsxs)("div",{className:"container",children:[Object(l.jsx)(Ue,{}),Object(l.jsx)(d,{}),Object(l.jsxs)("div",{className:"container-content",children:[Object(l.jsx)(Q.b,{path:"/profile/:userId?",render:function(){return Object(l.jsx)(Y,{})}}),Object(l.jsx)(Q.b,{path:"/dialogs",render:function(){return Object(l.jsx)(ie,{})}}),Object(l.jsx)(Q.b,{path:"/users",render:function(){return Object(l.jsx)(Pe,{})}}),Object(l.jsx)(Q.b,{path:"/music",render:function(){return Object(l.jsx)(oe,{})}}),Object(l.jsx)(Q.b,{path:"/settings",render:function(){return Object(l.jsx)(ce,{})}}),Object(l.jsx)(Q.b,{path:"/login",render:function(){return Object(l.jsx)(Me,{})}})]})]})},He=(s(239),s(109)),Le=s(243),Be=Object(Z.c)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:var s=Object(k.a)(Object(k.a)({},e),{},{post:Object(y.a)(e.post)}),a=s.newPostText,n={id:6,message:a,username:"Htoto"};return s.post.unshift(n),s.newPostText="",Object(k.a)({},s);case L:var r=Object(k.a)({},e);return r.newPostText=t.text,Object(k.a)({},r);case B:return Object(k.a)(Object(k.a)({},e),{},{userProfile:Object(k.a)({},t.profileData)});case G:case R:return Object(k.a)(Object(k.a)({},e),{},{userProfile:Object(k.a)(Object(k.a)({},e.userProfile),{},{status:t.status})});default:return e}},dialogsPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND-MESSAGE":var s=Object(k.a)(Object(k.a)({},e),{},{dialogs:Object(y.a)(e.dialogs),messages:Object(y.a)(e.messages)}),a=s.newMessageText,n={id:6,message:a};return s.newMessageText="",s.messages.push(n),Object(k.a)({},s);case"CHANGE-MESSAGE-TEXT":var r=Object(k.a)({},e);return r.newMessageText=t.newMessage,Object(k.a)({},r);default:return e}},usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case me:return Object(k.a)(Object(k.a)({},e),{},{followInProgress:t.isFollow?[].concat(Object(y.a)(e.followInProgress),[t.id]):Object(y.a)(e.followInProgress.filter((function(e){return e!==t.id})))});case je:return Object(k.a)(Object(k.a)({},e),{},{items:e.items.map((function(e){return e.id===t.userID?Object(k.a)(Object(k.a)({},e),{},{followed:!0}):e}))});case pe:return Object(k.a)(Object(k.a)({},e),{},{items:e.items.map((function(e){return e.id===t.userID?Object(k.a)(Object(k.a)({},e),{},{followed:!1}):e}))});case fe:return Object(k.a)(Object(k.a)({},e),{},{isFetching:t.isFetching});case be:return Object(k.a)(Object(k.a)({},e),{},{items:t.items});case he:return Object(k.a)(Object(k.a)({},e),{},{currentPage:t.currentPage});case ge:return Object(k.a)(Object(k.a)({},e),{},{totalCount:t.totalCount});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ye:return Object(k.a)(Object(k.a)(Object(k.a)({},e),t.data),{},{isAuth:!0});default:return e}},form:Le.a}),Ge=Object(Z.e)(Be,Object(Z.a)(He.a));n.a.render(Object(l.jsx)(u.a,{children:Object(l.jsx)(S.a,{store:Ge,children:Object(l.jsx)(i.a.StrictMode,{children:Object(l.jsx)(Fe,{})})})}),document.getElementById("root"))},55:function(e,t,s){e.exports={header:"Header_header__1n4f9",title:"Header_title__2eQxD",loginBlock:"Header_loginBlock__2LGuh"}}},[[240,1,2]]]);
//# sourceMappingURL=main.d39abbec.chunk.js.map